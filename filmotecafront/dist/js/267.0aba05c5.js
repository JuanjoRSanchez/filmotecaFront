"use strict";(self["webpackChunkfilmotecafront"]=self["webpackChunkfilmotecafront"]||[]).push([[267],{835:function(e,t,a){a.d(t,{Z:function(){return c}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"volver"}},[a("div",{attrs:{id:"cajaVolver"}},[a("router-link",{staticClass:"btn btn-primary",attrs:{to:"/homePage"},on:{click:e.borrarId}},[e._v("Volver a tus películas")])],1)])},l=[],o={name:"returnToHome",data:function(){return{}},methods:{borrarId(){localStorage.IdPelicula=""}}},s=o,r=a(1001),n=(0,r.Z)(s,i,l,!1,null,null,null),c=n.exports},5534:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"updatePelicula"}},[a("section",{staticClass:"h-100 gradient-form"},[a("headerMain"),a("returnToHome"),a("div",{staticClass:"col-lg-12",attrs:{id:"cajaUpdate"}},[a("form",{attrs:{oninput:"result.value = slider.value"},on:{submit:function(t){return t.preventDefault(),e.addPelicula.apply(null,arguments)}}},[a("h4",[e._v("Introduce los datos de la película")]),a("hr"),a("div",{staticClass:"cajaForm"},[a("div",{staticClass:"boxCampo"},[a("label",{staticClass:"label01",attrs:{for:"form2Example20"}},[e._v("Título")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.titulo,expression:"titulo"}],staticClass:"inputE readOnly",attrs:{type:"text",id:"form2Example20",readonly:""},domProps:{value:e.titulo},on:{input:function(t){t.target.composing||(e.titulo=t.target.value)}}})]),a("div",{staticClass:"boxCampo"},[a("label",{staticClass:"label01",attrs:{for:"form2Example21"}},[e._v("Año")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.anio,expression:"anio"}],staticClass:"inputE",attrs:{type:"text",id:"form2Example21"},domProps:{value:e.anio},on:{input:function(t){t.target.composing||(e.anio=t.target.value)}}})]),a("div",{staticClass:"boxCampo"},[a("label",{staticClass:"label01",attrs:{for:"form2Example22"}},[e._v("Director")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.director,expression:"director"}],staticClass:"inputE readOnly",attrs:{type:"text",id:"form2Example22",readonly:""},domProps:{value:e.director},on:{input:function(t){t.target.composing||(e.director=t.target.value)}}})]),a("div",{staticClass:"cajaComentario"},[a("label",{staticClass:"label02",attrs:{for:"form2Example13"}},[e._v("Comentario")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comentario,expression:"comentario"}],staticClass:"inputtE textArea",attrs:{id:"form2Example13"},domProps:{value:e.comentario},on:{input:function(t){t.target.composing||(e.comentario=t.target.value)}}})]),a("label",[e._v("Ponle nota")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.nota,expression:"nota"}],attrs:{type:"range",id:"slider",min:"0",max:"10",step:"1",value:"0"},domProps:{value:e.nota},on:{__r:function(t){e.nota=t.target.value}}}),a("br"),e._v(" Le pongo un "),a("output",{attrs:{name:"result",for:"slider"}},[e._v("5")]),a("hr"),a("p",[e._v("¿Has visto la película?")]),a("div",{staticClass:"cajaVisto"},[a("div",{staticClass:"boxCampo"},[a("label",{staticClass:"form-check-label label01",attrs:{for:"form2Example25"}},[e._v("Si")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.vista,expression:"vista"}],staticClass:"form-check-input",attrs:{type:"radio",id:"form2Example25",value:"true"},domProps:{checked:e._q(e.vista,"true")},on:{change:function(t){e.vista="true"}}})]),a("div",{staticClass:"boxCampo"},[a("label",{staticClass:"form-check-label label01",attrs:{for:"form2Example26"}},[e._v("No")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.vista,expression:"vista"}],staticClass:"form-check-input",attrs:{type:"radio",id:"form2Example26",value:"false"},domProps:{checked:e._q(e.vista,"false")},on:{change:function(t){e.vista="false"}}})]),a("hr")]),e._m(0)])])])],1),a("div",{attrs:{id:"mensaje"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mensaje,expression:"mensaje"}],attrs:{type:"text"},domProps:{value:e.mensaje},on:{input:function(t){t.target.composing||(e.mensaje=t.target.value)}}})]),a("div",{attrs:{id:"mensajeAlerta"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mensajeAlerta,expression:"mensajeAlerta"}],attrs:{type:"text"},domProps:{value:e.mensajeAlerta},on:{input:function(t){t.target.composing||(e.mensajeAlerta=t.target.value)}}})]),a("footerComponent")],1)},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center pt-1 mb-5 pb-1"},[a("button",{staticClass:"btn btn-primary btn-block fa-lg mb-3",attrs:{type:"submit",to:"/home"}},[e._v(" Guardar ")])])}],o=a(6166),s=a.n(o),r=a(3493),n=a(9814),c=a(835),m=a(5784),u={name:"updatePelicula",components:{headerMain:n.Z,returnToHome:c.Z,FooterComponent:m.Z},data:function(){return{email:localStorage.mail,vista:!1,nota:"",comentario:"",director:"",titulo:"",anio:"",resultadoAjaxNombre:"",resultadoAjaxApellido:"",usuario:"",password:"",error:!1,error_msg:"",idPelicula:"",pelis:{},peliDTO:{},pelicula:{},mensaje:"",mensajeAlerta:""}},created(){localStorage.mail?(this.idPelicula=localStorage.idPelicula,this.AJAXConsultaPeliculaById(this.idPelicula)):r.Z.push({name:"LandingPage"})},methods:{AJAXConsultaPeliculaById(){s().get("http://localhost:9012/filmoteca/v1/pelicula/"+localStorage.idPelicula).then((e=>{this.pelicula=e.data,this.director=this.pelicula.nombreDirector,this.titulo=this.pelicula.title,this.anio=this.pelicula.anio,this.nota=this.pelicula.nota,this.comentario=this.pelicula.comentario,this.vista=this.pelicula.vista}))},deleteDatosPelicula(){localStorage.idPelicula=""},addPelicula(){const e=new Date,t=e.getFullYear();"true"==this.vista?this.vista=!0:this.vista=!1,isNaN(this.anio)?this.alertaAnio="Revisa la fecha por favor":this.anio<1880||this.anio>t?(this.mensajeAlerta="Revisa la fecha por favor",document.getElementById("mensajeAlerta").style.display="block",setTimeout(this.ocultarMensajeAlerta,3e3)):this.comentario.length>200?(this.mensajeAlerta="El comentario es demasiado largo",document.getElementById("mensajeAlerta").style.display="block",setTimeout(this.ocultarMensajeAlerta,3e3)):(this.peliDTO.id=this.idPelicula,this.peliDTO.emailusuario=localStorage.mail,this.peliDTO.title=this.titulo,this.peliDTO.anio=this.anio,this.peliDTO.nombreDirector=this.director,this.peliDTO.comentario=this.comentario,this.peliDTO.nota=this.nota,this.peliDTO.vista=this.vista,s().put("http://localhost:9012/filmoteca/v1/pelicula/update/"+this.idPelicula,this.peliDTO).then((e=>{"ok"===e.data?(this.mensaje="La película se ha actualizado con exito",document.getElementById("mensaje").style.display="block",setTimeout(this.ocultarMensaje,3e3)):(this.mensajeAlerta="Lo sentimos pero no pudimos actualizar la película, intentalo más tarde",document.getElementById("mensajeAlerta").style.display="block",setTimeout(this.ocultarMensaje,3e3))}))),this.deleteDatosPelicula()},rellenarDirector(e){this.director=e,this.resultadoAjaxNombre=""},ocultarMensaje(){document.getElementById("mensaje").style.display="none",r.Z.push("homePage")},ocultarMensajeAlerta(){document.getElementById("mensajeAlerta").style.display="none"}}},d=u,p=a(1001),v=(0,p.Z)(d,i,l,!1,null,"acb0d648",null),h=v.exports}}]);
//# sourceMappingURL=267.0aba05c5.js.map